ALTER TABLE REGISTERED_USER DROP CONSTRAINT fk_registered_user;
ALTER TABLE BLOG DROP CONSTRAINT fk_blog;
ALTER TABLE PAYMENT_DETAIL DROP CONSTRAINT fk_detail;
ALTER TABLE POST DROP CONSTRAINT fk_post1;
ALTER TABLE POST DROP CONSTRAINT fk_post2;
ALTER TABLE TAG_DETAIL DROP CONSTRAINT fk_tag_detail;
ALTER TABLE CATEGORY_DETAIL DROP CONSTRAINT fk_category_detail;
ALTER TABLE COMMENT_DETAIL DROP CONSTRAINT fk_comment_detail1;
ALTER TABLE COMMENT_DETAIL DROP CONSTRAINT fk_comment_detail2;
ALTER TABLE LIKE_DETAIL DROP CONSTRAINT fk_like_detail1;
ALTER TABLE LIKE_DETAIL DROP CONSTRAINT fk_like_detail2;
ALTER TABLE POST_PAYMENT DROP CONSTRAINT fk_post_payment1;
ALTER TABLE POST_PAYMENT DROP CONSTRAINT fk_post_payment2;



DROP TABLE ROLE_DETAIL;
DROP TABLE POST_TYPE;
DROP TABLE REGISTERED_USER;
DROP TABLE BLOG;
DROP TABLE PAYMENT_DETAIL;
DROP TABLE POST;
DROP TABLE TAG_DETAIL;
DROP TABLE CATEGORY_DETAIL;
DROP TABLE COMMENT_DETAIL;
DROP TABLE LIKE_DETAIL;
DROP TABLE POST_PAYMENT;




CREATE TABLE ROLE_DETAIL (
  role_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  role_name VARCHAR2(255) NOT NULL,
  role_description VARCHAR2(255),
  CONSTRAINT  pk_role_detail PRIMARY KEY (role_id)
);

CREATE TABLE POST_TYPE (
  post_type_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  post_type_name VARCHAR2(255) NOT NULL,
  post_type_description VARCHAR2(255),
  CONSTRAINT  pk_post_type PRIMARY KEY (post_type_id)
);

CREATE TABLE REGISTERED_USER (
  user_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  full_name VARCHAR2(255) NOT NULL,
  email VARCHAR2(255) NOT NULL,
  username VARCHAR2(255) NOT NULL,
  registered_user_password VARCHAR2(255) NOT NULL,
  role_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_registered_user PRIMARY KEY (user_id),
  CONSTRAINT fk_registered_user FOREIGN KEY (role_id) REFERENCES ROLE_DETAIL(role_id)
);

CREATE TABLE BLOG (
  blog_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  title VARCHAR2(255) NOT NULL,
  blog_description VARCHAR2(255),
  user_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_blog PRIMARY KEY (blog_id),
  CONSTRAINT fk_blog FOREIGN KEY (user_id) REFERENCES REGISTERED_USER(user_id)
);

CREATE TABLE PAYMENT_DETAIL (
  pay_det_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  card_no VARCHAR2(255) NOT NULL,
  card_type VARCHAR2(255) NOT NULL,
  expiry_date TIMESTAMP NOT NULL,
  user_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_detail PRIMARY KEY (pay_det_id),
  CONSTRAINT fk_detail FOREIGN KEY (user_id) REFERENCES REGISTERED_USER(user_id)
);

CREATE TABLE POST (
  post_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  author VARCHAR2(255),
  publish_date TIMESTAMP,
  category_id NUMBER(10) NOT NULL,
  post_content BLOB,
  blog_id NUMBER(10) NOT NULL,
  post_type_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_post PRIMARY KEY (post_id),
  CONSTRAINT fk_post1 FOREIGN KEY (blog_id) REFERENCES BLOG(blog_id),
  CONSTRAINT fk_post2 FOREIGN KEY (post_type_id) REFERENCES POST_TYPE(post_type_id)
);

CREATE TABLE TAG_DETAIL (
  tag_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  tag_text VARCHAR2(255) NOT NULL,
  post_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_tag_detail PRIMARY KEY (tag_id),
  CONSTRAINT fk_tag_detail FOREIGN KEY (post_id) REFERENCES POST(post_id)
);

CREATE TABLE CATEGORY_DETAIL (
  category_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  category_name VARCHAR2(255) NOT NULL,
  category_description VARCHAR2(255),
  post_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_category_detail PRIMARY KEY (category_id),
  CONSTRAINT fk_category_detail FOREIGN KEY (post_id) REFERENCES POST(post_id)
);

CREATE TABLE COMMENT_DETAIL (
  comment_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  comment_content VARCHAR2(255) NOT NULL,
  user_id NUMBER(10) NOT NULL,
  post_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_comment_detail PRIMARY KEY (comment_id),
  CONSTRAINT fk_comment_detail1 FOREIGN KEY (user_id) REFERENCES REGISTERED_USER(user_id),
  CONSTRAINT fk_comment_detail2 FOREIGN KEY (post_id) REFERENCES POST(post_id)
);

CREATE TABLE LIKE_DETAIL (
  like_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  user_id NUMBER(10) NOT NULL,
  post_id NUMBER(10) NOT NULL,
  CONSTRAINT pk_like_detail PRIMARY KEY (like_id),
  CONSTRAINT fk_like_detail1 FOREIGN KEY (user_id) REFERENCES REGISTERED_USER(user_id),
  CONSTRAINT fk_like_detail2 FOREIGN KEY (post_id) REFERENCES POST(post_id)
);

CREATE TABLE POST_PAYMENT (
  pay_det_id NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  post_id NUMBER(10) NOT NULL,
  CONSTRAINT fk_post_payment1 FOREIGN KEY (pay_det_id) REFERENCES PAYMENT_DETAIL(pay_det_id),
  CONSTRAINT fk_post_payment2 FOREIGN KEY (post_id) REFERENCES POST(post_id)
);